(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{37:function(e,t,n){},39:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),s=n(26),r=n.n(s),a=(n(37),n(9)),i=n(4),l=n.n(i),b=n(6),j=n(5),h=(n(39),n(3)),u=n(19),d="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var O={Accept:"application/json",Authorization:f},k=function(e){return fetch("".concat(d,"/books/").concat(e),{headers:O}).then((function(e){return e.json()})).then((function(e){return e.book}))},x=function(e,t){return fetch("".concat(d,"/books/").concat(e.id),{method:"PUT",headers:Object(u.a)(Object(u.a)({},O),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},p=function(e,t){return fetch("".concat(d,"/search"),{method:"POST",headers:Object(u.a)(Object(u.a)({},O),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},v=n(8),m=n(32),g=n(1),N=function(e){var t=e.books,n=e.setSearchBooks,c=Object(o.useState)(""),s=Object(j.a)(c,2),r=s[0],a=s[1];Object(o.useEffect)((function(){!function(e){var t=e.trim().toLowerCase(),o=function(){var e=Object(b.a)(l.a.mark((function e(){var o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:(o=e.sent).length>0?(c=i(o),n(c)):n([]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();0===t.length?n([]):o()}(r)}),[r]);var i=function(e){return e.map((function(e){var n=t.filter((function(t){return t.id===e.id}));return n.length>0?n[0]:e}))};return Object(g.jsxs)("div",{className:"search-books-bar",children:[Object(g.jsx)(v.b,{to:"/",className:"close-search",children:"Close"}),Object(g.jsx)("div",{className:"search-books-input-wrapper",children:Object(g.jsx)(m.DebounceInput,{type:"text",placeholder:"Search by title, author, or ISBN.",debounceTimeout:500,onChange:function(e){a(e.target.value)}})})]})},S=function(e){var t,n=e.book;return Object(g.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(null===(t=n.imageLinks)||void 0===t?void 0:t.thumbnail,'")')}})},y=function(e){var t=e.title,n=e.books,o=e.onChangeShelf;return Object(g.jsxs)("div",{className:"bookshelf",children:[Object(g.jsx)("h2",{className:"bookshelf-title",children:t}),Object(g.jsx)("div",{className:"bookshelf-books",children:Object(g.jsx)("ol",{className:"books-grid",children:null===n||void 0===n?void 0:n.map((function(e){return Object(g.jsx)("li",{children:Object(g.jsx)(D,{book:e,onChangeShelf:o})},e.id)}))})})]})},C=[{key:"currentlyReading",title:"Currently Reading"},{key:"wantToRead",title:"Want to Read"},{key:"read",title:"Read"}],B=function(e){var t=e.books,n=e.onChangeShelf;return Object(g.jsxs)("div",{className:"list-books",children:[Object(g.jsx)("div",{className:"list-books-content",children:C.map((function(e){return Object(g.jsx)(y,{title:e.title,books:t.filter((function(t){return t.shelf===e.key})),onChangeShelf:n},e.key)}))}),Object(g.jsx)("div",{className:"open-search",children:Object(g.jsx)(v.b,{to:"/search",children:"Add a book"})})]})},A=function(e){var t=e.book,n=e.onChangeShelf,o=e.onAddBook;return Object(g.jsx)("div",{className:"book-shelf-changer",children:Object(g.jsxs)("select",{value:t.shelf?t.shelf:"none",onChange:function(e){t.shelf=e.target.value,n?n(t):o&&o(t)},children:[Object(g.jsx)("option",{value:"label",disabled:!0,children:t.shelf&&"none"!==t.shelf?"Move to...":"Add to..."}),C.map((function(e){return Object(g.jsx)("option",{value:e.key,children:e.title},e.key)})),Object(g.jsx)("option",{value:"none",children:"None"})]})})},w=function(e){var t=e.book;return Object(g.jsxs)("div",{className:"book-title",children:[t.title,t.subtitle?" - ".concat(t.subtitle):""]})},R=function(e){var t,n,o=e.book,c=e.isliteral;return Object(g.jsx)("div",{className:"book-authors",children:c?Object(g.jsxs)("span",{children:[Object(g.jsx)("span",{children:"By "}),Object(g.jsx)("strong",{children:null===(t=o.authors)||void 0===t?void 0:t.map((function(e,t){return 0===t?e:", ".concat(e)}))})]}):Object(g.jsx)("span",{children:null===(n=o.authors)||void 0===n?void 0:n.map((function(e,t){return 0===t?e:", ".concat(e)}))})})},I=function(e){var t=e.book;return Object(g.jsxs)("div",{className:"book-publish",children:[Object(g.jsx)("span",{children:"Published "}),t.publisher?Object(g.jsxs)("span",{children:[Object(g.jsx)("span",{children:"By "}),Object(g.jsxs)("strong",{children:[t.publisher," "]})]}):"",t.publishedDate?Object(g.jsxs)("span",{children:[Object(g.jsx)("span",{children:"in "}),Object(g.jsx)("strong",{children:t.publishedDate})]}):""]})},P=function(e){var t=e.book;return Object(g.jsx)("div",{className:"book-description",children:Object(g.jsx)("div",{children:t.description?t.description:"No description available."})})},E=function(e){var t=e.book,n=e.onChangeShelf,o=e.onAddBook;return Object(g.jsxs)("div",{className:"book-details",children:[Object(g.jsxs)("div",{className:"book-top",children:[Object(g.jsx)(S,{book:t}),Object(g.jsx)(A,{book:t,onChangeShelf:n,onAddBook:o})]}),Object(g.jsxs)("div",{className:"book-right",children:[Object(g.jsx)(w,{book:t}),Object(g.jsx)(R,{book:t,isliteral:!0}),Object(g.jsx)(I,{book:t}),Object(g.jsx)(P,{book:t})]})]})},T=n(27),M=n.n(T);M.a.setAppElement("#root");var D=function(e){var t=e.book,n=e.onChangeShelf,c=e.onAddBook,s=e.fromSearch,r=Object(o.useState)(!1),a=Object(j.a)(r,2),i=a[0],l=a[1],b=function(){l(!1)};return Object(g.jsxs)("div",{className:"book",children:[Object(g.jsxs)("div",{className:"book-top",children:[s?Object(g.jsx)(v.b,{to:"#",onClick:function(){l(!0)},children:Object(g.jsx)(S,{book:t})}):Object(g.jsx)(v.b,{to:"/book/".concat(t.id),state:{bookFromParent:t},children:Object(g.jsx)(S,{book:t})}),Object(g.jsx)(A,{book:t,onChangeShelf:n,onAddBook:c})]}),Object(g.jsx)(w,{book:t}),Object(g.jsx)(R,{book:t}),s?Object(g.jsxs)(M.a,{isOpen:i,onRequestClose:b,className:"book-details-modal",contentLabel:"Book Details",children:[Object(g.jsx)(v.b,{to:"#",onClick:b,className:"close-modal",children:"Close"}),Object(g.jsx)(E,{book:t,onChangeShelf:n,onAddBook:c})]}):""]})},F=function(e){var t=e.searchBooks,n=e.onChangeShelf,o=e.onAddBook;return Object(g.jsx)("div",{className:"search-books-results",children:Object(g.jsx)("ol",{className:"books-grid",children:t.length>0?t.map((function(e){return Object(g.jsx)("li",{children:e.shelf?Object(g.jsx)(D,{book:e,fromSearch:!0,onChangeShelf:n}):Object(g.jsx)(D,{book:e,fromSearch:!0,onAddBook:o})},e.id)})):Object(g.jsx)("span",{children:"No result found."})})})},J=function(e){var t=e.books,n=e.onChangeShelf,c=e.onAddBook,s=Object(o.useState)([]),r=Object(j.a)(s,2),a=r[0],i=r[1];return Object(g.jsxs)("div",{className:"search-books",children:[Object(g.jsx)(N,{books:t,setSearchBooks:i}),Object(g.jsx)(F,{searchBooks:a,onAddBook:c,onChangeShelf:n})]})},L=function(e){var t=e.onChangeShelf,n=e.onAddBook,c=Object(h.o)().bookId,s=(Object(h.k)().state||{bookFromParent:null}).bookFromParent,r=Object(o.useState)(s),a=Object(j.a)(r,2),i=a[0],u=a[1],d=Object(h.m)();return Object(o.useEffect)((function(){null===i&&function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==c){e.next=3;break}throw new Error("Missing bookId in the URL.");case 3:return e.next=5,k(c);case 5:t=e.sent,u(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d("/404");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[c,i]),Object(g.jsx)("div",{className:"container",children:i?Object(g.jsx)(E,{book:i,onChangeShelf:t,onAddBook:n}):""})},q=function(){return Object(g.jsx)("div",{className:"list-books-title",children:Object(g.jsx)("h1",{children:Object(g.jsx)(v.b,{to:"/",className:"list-books-title-link",children:"MyReads"})})})},U=function(){return Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)("div",{className:"not-found",children:[Object(g.jsx)("h3",{children:"Page Not Found"}),Object(g.jsx)(v.b,{to:"/",children:"Return to Home page"})]})})};var z=function(){var e=Object(o.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1];Object(o.useEffect)((function(){(function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/books"),{headers:O}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var s=function(e){(function(){var t=Object(b.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e,e.shelf);case 2:c(n.map((function(t){return t.id===e.id?e:t})));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()},r=function(e){(function(){var t=Object(b.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e,e.shelf);case 2:c([].concat(Object(a.a)(n),[e]));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()};return Object(g.jsxs)("div",{className:"app",children:[Object(g.jsx)(q,{}),Object(g.jsxs)(h.c,{children:[Object(g.jsx)(h.a,{path:"/",element:Object(g.jsx)(B,{books:n,onChangeShelf:s})}),Object(g.jsx)(h.a,{path:"/book/:bookId",element:Object(g.jsx)(L,{onChangeShelf:s,onAddBook:r})}),Object(g.jsx)(h.a,{path:"/search",element:Object(g.jsx)(J,{books:n,onAddBook:r,onChangeShelf:s})}),Object(g.jsx)(h.a,{path:"/404",element:Object(g.jsx)(U,{})})]})]})};r.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(v.a,{children:Object(g.jsx)(z,{})})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.7f77df3d.chunk.js.map